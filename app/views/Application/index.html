#{extends 'main.html' /}
#{set title:'Home' /}

<h3>Select categories</h3>
 
#{form @index()}
 
    #{ifErrors}
        <p class="error">
            Please correct these errors.
        </p>
    #{/ifErrors}
    
    <div class="dish-categories">
		<ul>
			#{list items:dishCategories, as:'dishCategory'}
				<li>
					#{displayDishCategoryCheckboxes dishCategory:dishCategory /}
				</li>
			#{/list}
			#{field 'dishCategoriesText'}
				<input type="hidden" size="50" id="${field.name}" name="${field.name}" value="${dishCategoriesText}"/>
			#{/field}
			#{field 'dishTagsText'}
				<input type="text" size="50" id="${field.name}" name="${field.name}" value="${dishTagsText}"/>
			#{/field}
    	</ul>
	</div>
	
    <p>
        <input type="submit" value="Search recipes"/>
    </p>
    
#{/form}

#{if recipes.size()}

    <div class="recipes">
        <h3>Most recent recipes <span class="from">from this application</span></h3>
    
        #{list items:recipes, as:'recipe'}
            #{display recipe:recipe, as:'teaser' /}
        #{/list}
    </div>
    
#{/if}

<script type="text/javascript" charset="utf-8">
    $(function() {         
        // S'il y a eu une recherche avant, focus to form
        if($('input[type="hidden"]').val() != "") {
        	$('html').scrollTop($(".recipes").offset().top);
        }
    });
</script>